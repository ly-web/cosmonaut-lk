<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
    <head>
        <meta http-equiv='Content-Type' content='text/html; charset=GB2312'/>
        <link type='text/css' href='c_000.css' rel='stylesheet'/>
        <script src='j_001.js' type='text/javascript'></script>
        <style type='text/css'>
        tr{height:27px;}
        .td1{text-align:left;padding-left:40px;}
        .td2{text-align:right;padding-right:5px;}
        .td3{text-align:right;padding-right:40px;}
        .backcolor{background-color:#F00;}
        .color1{color:#F00;font-weight: bold;}
        .color2{color:#888;font-weight: bold;}
        .color3{color:#444;font-weight: bold;}
        </style>
    </head>
    <script type="text/javascript" src="jquery.min.js"></script>
    <body onload='Init();'>
        <div style='width:100%;' id='fault_code'></div>
        <div class='blank'></div>
        <div class='title' style='width:90%;'>
        <div class='subtitle'>
            <div class='r1 backcolor'></div>
            <div class='r2 backcolor'></div>
            <div class='r3 backcolor'></div>
            <div class='r4 backcolor'></div>
            <div class='content backcolor subcontent'>
                <span id='N060'></span>
            </div>
            <div class='r4 backcolor'></div>
            <div class='r3 backcolor'></div>
            <div class='r2 backcolor'></div>
            <div class='r1 backcolor'></div>
            <div class='line_short'></div>
        </div>
        </div>
        <table width='90%' border='0'>
            <tr>
                <td class='td1 odd' width='20%'><span class='color2'>▲</span></td>
                <td class='td3 odd' width='30%'><span class='color1' id='ST0'></span></td>
                <td class='td1 odd' width='20%'><span class='color2'>▲</span></td>
                <td class='td3 odd' width='30%'><span class='color1' id='ST1'></span></td>
            </tr>
            <tr>
                <td class='td1 even' width='20%'><span class='color2'>▲</span></td>
                <td class='td3 even' width='30%'><span class='color1' id='ST2'></span></td>
                <td class='td1 even' width='20%'><span class='color2'>▲</span></td>
                <td class='td3 even' width='30%'><span class='color1' id='ST5'></span></td>
            </tr>
            <tr>
                <td class='td1 odd' width='20%'><span class='color2'>▲</span></td>
                <td class='td3 odd' width='30%'><span class='color1' id='ST6'></span></td>
                <td class='td1 odd' width='20%'><span class='color2'>▲</span></td>
                <td class='td3 odd' width='30%'><span class='color1' id='ST8'></span></td>
            </tr>
            <tr>
                <td class='td1 even' width='20%'><span class='color2'>▲</span></td>
                <td class='td3 even' width='30%'><span class='color1' id='ST15'></span></td>
                <td class='td1 even' width='20%'><span class='color2'>▲</span></td>
                <td class='td3 even' width='30%'><span class='color1' id='ST16'></span></td>
            </tr>
            <tr>
                <td class='td1 odd' width='20%'><span class='color2'>▲</span></td>
                <td class='td3 odd' width='30%'><span class='color1' id='ST17'></span></td>
                <td class='td1 odd' width='20%'><span class='color2'>▲</span></td>
                <td class='td3 odd' width='30%'><span class='color1' id='ST18'></span></td>
            </tr>
            <tr>
                <td class='td1 even' width='20%'><span class='color2'>▲</span></td>
                <td class='td3 even' width='30%'><span class='color1' id='ST19'></span></td>
                <td class='td1 even' width='20%'><span class='color2'>▲</span></td>
                <td class='td3 even' width='30%'><span class='color1' id='ST20'></span></td>
            </tr>
            <tr>
                <td class='td1 odd' width='20%'><span class='color2'>▲</span></td>
                <td class='td3 odd' width='30%'><span class='color1' id='ST23'></span></td>
                <td class='td1 odd' width='20%'><span class='color2'></span></td>
                <td class='td3 odd' width='30%'><span class='color1'></span></td>
            </tr>
            <tr>
                <td class='td1 even' width='20%'><span class='color2'>▲</span></td>
                <td class='td3 even' width='30%'><span class='color1' id='SF0'></span></td>
                <td class='td1 even' width='20%'><span class='color2'>▲</span></td>
                <td class='td3 even' width='30%'><span class='color1' id='SF1'></span></td>
            </tr>
            <tr>
                <td class='td1 odd' width='20%'><span class='color2'>▲</span></td>
                <td class='td3 odd' width='30%'><span class='color1' id='SF2'></span></td>
                <td class='td1 odd' width='20%'><span class='color2'>▲</span></td>
                <td class='td3 odd' width='30%'><span class='color1' id='SF3'></span></td>
            </tr>
            <tr>
                <td class='td1 even' width='20%'><span class='color2'>▲</span></td>
                <td class='td3 even' width='30%'><span class='color1' id='SF4'></span></td>
                <td class='td1 even' width='20%'><span class='color2'>▲</span></td>
                <td class='td3 even' width='30%'><span class='color1' id='SF5'></span></td>
            </tr>
            <tr>
                <td class='td1 odd' width='20%'><span class='color2'>▲</span></td>
                <td class='td3 odd' width='30%'><span class='color1' id='SF6'></span></td>
                <td class='td1 odd' width='20%'><span class='color2'>▲</span></td>
                <td class='td3 odd' width='30%'><span class='color1' id='SF7'></span></td>
            </tr>
        </table>
        <div class='line_long'></div>
        <div class='btm_blank'></div>
        <!--[if IE 6]><script type='text/javascript'>document.execCommand('BackgroundImageCache',false,true);</script><![endif]-->
    </body>
    <script type='text/javascript'>
        window.history.forward(1);
        var language=0;
        var Json;
        var lang=
        {		
            N060:['故障信息','Fault Information'],
            N061:['故障&nbsp;','Fault&nbsp;'],
            N062:['储能逆变器故障','PCS Fault'],
            N063:['储能逆变器通讯故障','PCS Comm Fault'],
            N064:['储能逆变器地址冲突','PCS Address Conflict'],
            N065:['',''],
            N066:['光伏逆变器故障','PV Fault'],
            N067:['光伏逆变器通讯故障','PV Comm Fault'],
            N068:['光伏逆变器地址冲突','PV Address Conflict'],
            N069:['',''],
            N070:['接触器故障','Contactor Fault'],
            N071:['',''],
            N072:['',''],
            N073:['',''],
            N074:['',''],
            N075:['',''],
            N076:['',''],
            N077:['自检失败','Self Check Fail'],
            N078:['自检超时','Self Check Timeout'],
            N079:['微网供电启动超时','Grid Start Timeout'],
            N080:['微网供电启动失败','Grid Start Fail'],
            N081:['电网供电启动超时','Micro Start Timeout'],
            N082:['电网供电启动失败','Micro Start Fail'],
            N083:['',''],
            N084:['',''],
            N085:['停机超时','Stop Timeout'],
            N086:['',''],
            N087:['',''],
            N088:['',''],
            N089:['',''],
            N090:['',''],
            N091:['',''],
            N092:['',''],
            N093:['',''],
            N094:['节点1故障','Node 1 Fault'],
            N095:['节点2故障','Node 2 Fault'],
            N096:['节点3故障','Node 3 Fault'],
            N097:['节点4故障','Node 4 Fault'],
            N098:['节点5故障','Node 5 Fault'],
            N099:['节点6故障','Node 6 Fault'],
            N100:['节点7故障','Node 7 Fault'],
            N101:['节点8故障','Node 8 Fault'],
            N102:['',''],
            N103:['',''],
            N104:['',''],
            N105:['',''],
            N106:['',''],
            N107:['',''],
            N108:['',''],
            N109:['',''],
            N110:['',''],
            N111:['',''],
            N112:['',''],
            N113:['',''],
            N114:['',''],
            N115:['',''],
            N116:['',''],
            N117:['',''],
            N118:['',''],
            N119:['',''],
            N120:['',''],
            N121:['',''],
            N122:['',''],
            N123:['',''],
            N124:['',''],
            N125:['','']
        };

        //测试
        Json={ID_0x0301:85,ID_0x0152:0x00000170,ID_0x0153:0x000000f0}; //0x009F9177, 0x000000ff

        function jquery_ajax()
        {
            var i=0;
            var Fcode=new Array(2);

            //$.ajax({
            //    url:"s_038.html?",
            //    type:"get",
            //    contentType:"application/json;charset=utf-8",
            //    data:JSON.stringify({
            //        "time":new Date()
            //    }),
            //    dataType:"json",
                //success:function(data){
                    //Json = data;         
                    if(Json.ID_0x0301==0x55)language=0;else language=1;
                    document.getElementById('N060').innerHTML=lang.N060[language];
                    document.getElementById('ST0').innerHTML=lang.N062[language];
                    document.getElementById('ST1').innerHTML=lang.N063[language];
                    document.getElementById('ST2').innerHTML=lang.N064[language];
                    document.getElementById('ST5').innerHTML=lang.N067[language];
                    document.getElementById('ST6').innerHTML=lang.N068[language];
                    document.getElementById('ST8').innerHTML=lang.N070[language];
                    document.getElementById('ST15').innerHTML=lang.N077[language];
                    document.getElementById('ST16').innerHTML=lang.N078[language];
                    document.getElementById('ST17').innerHTML=lang.N079[language];
                    document.getElementById('ST18').innerHTML=lang.N080[language];
                    document.getElementById('ST19').innerHTML=lang.N081[language];
                    document.getElementById('ST20').innerHTML=lang.N082[language];
                    document.getElementById('ST23').innerHTML=lang.N085[language];

                    document.getElementById('SF0').innerHTML=lang.N094[language];
                    document.getElementById('SF1').innerHTML=lang.N095[language];
                    document.getElementById('SF2').innerHTML=lang.N096[language];
                    document.getElementById('SF3').innerHTML=lang.N097[language];
                    document.getElementById('SF4').innerHTML=lang.N098[language];
                    document.getElementById('SF5').innerHTML=lang.N099[language];
                    document.getElementById('SF6').innerHTML=lang.N100[language];
                    document.getElementById('SF7').innerHTML=lang.N101[language];

                    Fcode[0]=Json.ID_0x0152;
                    Fcode[1]=Json.ID_0x0153;

                    for(i=0;i<32;i++)
                    {
                        if(i==0 || i==1 || i==2 || i==5 || i==6 || i==8 || i==15 || i==16 || i==17 || i==18 || i==19 || i==20 || i==23)
                        {
                            if(((Fcode[0]>>i)&1)==1){
                                eval('document.getElementById(\'ST'+i+'\').className=\'color1\';');
                            }else{
                                eval('document.getElementById(\'ST'+i+'\').className=\'color3\';');
                            }
                        }
                    }
                    for(i=0;i<32;i++)
                    {
                        if(i==0 || i==1 || i==2 || i==3 || i==4 || i==5 || i==6 || i==7)
                        {
                            if(((Fcode[1]>>i)&1)==1){
                                eval('document.getElementById(\'SF'+i+'\').className=\'color1\';');
                            }else{
                                eval('document.getElementById(\'SF'+i+'\').className=\'color3\';');
                            }
                        }
                    }
                //}
            //});            
        }
        window.onresize = function()
        {
            var bodywidth=document.body.clientWidth;
            if(bodywidth<867){document.body.style.width="867px";}else{document.body.style.width="auto";}
        } 
        function Init()
        {
            jquery_ajax();
            setInterval('jquery_ajax()',1000);
        }
        function pad(num,n)
        {
            var len=num.toString().length;
            while(len++<n)num='0'+num;
            return num;
        }    
    </script>
</html>
